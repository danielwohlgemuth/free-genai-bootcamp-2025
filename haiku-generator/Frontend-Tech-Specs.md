# Haiku Generator - Frontend Technical Specifications

the frontend should be a React app
it should have two pages:
- a haiku overview page
- a haiku generator page

the overview page should display a list of haikus, with the following columns:
- Haiku ID
- Haiku (combine english haiku lines)
- Status (if it is failed, show the count of fields that are populated vs. the total count of fields. fields to consider: english haiku lines, image descriptions, image links, japanese haiku lines, audio links)
it should use the GET /haiku endpoint to fetch the data
it should have a delete button for each haiku and use the DELETE /haiku/{haiku_id} endpoint
it should have a create haiku button that opens the generator page with the path /haiku/{haiku_id}, where haiku_id is generated by the frontend

The generator page should have a chat interface.
- each message should be sent to the backend via the POST /chat/{haiku_id} endpoint. this endpoint could take minutes to return a response so there should be a loading indicator and the request timeout should be set to 10 minutes.
- once the backend returns a haiku status different than new, the chat should be disabled.

there should be an summary sections that conditionally shows the available haiku information:   
- english haiku lines, once they are available
- a square with four sections:
    - top-left: shows the japanese haiku lines and a play button after each to play the audio file, if it exists
    - top-right: show image 1
    - bottom-left: show image 2
    - bottom-right: show image 3

it should have a send button that uses the POST /haiku/{haiku_id} endpoint to send the current message
when the page opens, it should use the GET /haiku/{haiku_id} endpoint to fetch the haiku and chats and display them
it should have a delete button that uses the DELETE /haiku/{haiku_id} endpoint

The backend is available at http://localhost:8000
this should be configurable via environment variables

Backend API:

POST /chat/{haiku_id}
Request body:
{
    "message": "string"
}
Response body:
{
  "chat": {
    "chat_id": 0,
    "haiku_id": "string",
    "role": "string",
    "message": "string"
  },
  "haiku": {
    "haiku_id": "string",
    "status": "string",
    "error_message": "string",
    "haiku_line_en_1": "string",
    "haiku_line_en_2": "string",
    "haiku_line_en_3": "string",
    "image_description_1": "string",
    "image_description_2": "string",
    "image_description_3": "string",
    "image_link_1": "string",
    "image_link_2": "string",
    "image_link_3": "string",
    "haiku_line_ja_1": "string",
    "haiku_line_ja_2": "string",
    "haiku_line_ja_3": "string",
    "audio_link_1": "string",
    "audio_link_2": "string",
    "audio_link_3": "string"
  }
}

GET /haiku
Request body:
{
  "haikus": [
    {
      "haiku_id": "string",
      "status": "string",
      "error_message": "string",
      "haiku_line_en_1": "string",
      "haiku_line_en_2": "string",
      "haiku_line_en_3": "string",
      "image_description_1": "string",
      "image_description_2": "string",
      "image_description_3": "string",
      "image_link_1": "string",
      "image_link_2": "string",
      "image_link_3": "string",
      "haiku_line_ja_1": "string",
      "haiku_line_ja_2": "string",
      "haiku_line_ja_3": "string",
      "audio_link_1": "string",
      "audio_link_2": "string",
      "audio_link_3": "string"
    }
  ]
}

GET /haiku/{haiku_id}
Request body:
{
  "haiku": {
    "haiku_id": "string",
    "status": "string",
    "error_message": "string",
    "haiku_line_en_1": "string",
    "haiku_line_en_2": "string",
    "haiku_line_en_3": "string",
    "image_description_1": "string",
    "image_description_2": "string",
    "image_description_3": "string",
    "image_link_1": "string",
    "image_link_2": "string",
    "image_link_3": "string",
    "haiku_line_ja_1": "string",
    "haiku_line_ja_2": "string",
    "haiku_line_ja_3": "string",
    "audio_link_1": "string",
    "audio_link_2": "string",
    "audio_link_3": "string"
  },
  "chats": [
    {
      "chat_id": 0,
      "haiku_id": "string",
      "role": "string",
      "message": "string"
    }
  ]
}

DELETE /haiku/{haiku_id}
Request body:
{
  "message": "string"
}